# This file is programmatically generated, as this is the only practical way to get a unity cost that varies based on number of pops.
# For more details, please see the github repo: https://github.com/jonjowett/stellaris_mods

namespace = endgame_unity




@endgame_unity_cost_positive_001 =  13500
@endgame_unity_cost_negative_001 = -13500
@endgame_unity_cost_positive_002 =  17000
@endgame_unity_cost_negative_002 = -17000
@endgame_unity_cost_positive_003 =  20500
@endgame_unity_cost_negative_003 = -20500
@endgame_unity_cost_positive_004 =  24000
@endgame_unity_cost_negative_004 = -24000
@endgame_unity_cost_positive_005 =  27500
@endgame_unity_cost_negative_005 = -27500
@endgame_unity_cost_positive_006 =  32000
@endgame_unity_cost_negative_006 = -32000
@endgame_unity_cost_positive_007 =  36500
@endgame_unity_cost_negative_007 = -36500
@endgame_unity_cost_positive_008 =  41500
@endgame_unity_cost_negative_008 = -41500
@endgame_unity_cost_positive_009 =  46500
@endgame_unity_cost_negative_009 = -46500
@endgame_unity_cost_positive_010 =  54000
@endgame_unity_cost_negative_010 = -54000
@endgame_unity_cost_positive_011 =  64000
@endgame_unity_cost_negative_011 = -64000
@endgame_unity_cost_positive_012 =  75000
@endgame_unity_cost_negative_012 = -75000
@endgame_unity_cost_positive_013 =  86000
@endgame_unity_cost_negative_013 = -86000
@endgame_unity_cost_positive_014 =  97000
@endgame_unity_cost_negative_014 = -97000
@endgame_unity_cost_positive_015 =  108000
@endgame_unity_cost_negative_015 = -108000
@endgame_unity_cost_positive_016 =  126000
@endgame_unity_cost_negative_016 = -126000
@endgame_unity_cost_positive_017 =  152000
@endgame_unity_cost_negative_017 = -152000
@endgame_unity_cost_positive_018 =  178000
@endgame_unity_cost_negative_018 = -178000
@endgame_unity_cost_positive_019 =  205000
@endgame_unity_cost_negative_019 = -205000
@endgame_unity_cost_positive_020 =  235000
@endgame_unity_cost_negative_020 = -235000
@endgame_unity_cost_positive_021 =  285000
@endgame_unity_cost_negative_021 = -285000
@endgame_unity_cost_positive_022 =  350000
@endgame_unity_cost_negative_022 = -350000
@endgame_unity_cost_positive_023 =  420000
@endgame_unity_cost_negative_023 = -420000
@endgame_unity_cost_positive_024 =  500000
@endgame_unity_cost_negative_024 = -500000
@endgame_unity_cost_positive_025 =  580000
@endgame_unity_cost_negative_025 = -580000
@endgame_unity_cost_positive_026 =  740000
@endgame_unity_cost_negative_026 = -740000
@endgame_unity_cost_positive_027 =  1000000
@endgame_unity_cost_negative_027 = -1000000
@endgame_unity_cost_positive_028 =  1280000
@endgame_unity_cost_negative_028 = -1280000
@endgame_unity_cost_positive_029 =  1620000
@endgame_unity_cost_negative_029 = -1620000
@endgame_unity_cost_positive_030 =  1960000
@endgame_unity_cost_negative_030 = -1960000
@endgame_unity_cost_positive_031 =  2350000
@endgame_unity_cost_negative_031 = -2350000
@endgame_unity_cost_positive_032 =  3000000
@endgame_unity_cost_negative_032 = -3000000
@endgame_unity_cost_positive_033 =  4000000
@endgame_unity_cost_negative_033 = -4000000
@endgame_unity_cost_positive_034 =  5100000
@endgame_unity_cost_negative_034 = -5100000
@endgame_unity_cost_positive_035 =  6400000
@endgame_unity_cost_negative_035 = -6400000
@endgame_unity_cost_positive_036 =  7800000
@endgame_unity_cost_negative_036 = -7800000
@endgame_unity_cost_positive_037 =  10000000
@endgame_unity_cost_negative_037 = -10000000





event = {
	# Trigger the main event for all player countries
	id = endgame_unity.1
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_country = {
			limit = { is_ai = no }
			country_event = {
				id = endgame_unity.2
			}
		}
	}
}

country_event = {
	id = endgame_unity.2
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				AND = {
					num_pops > -1
					num_pops < 20
				}
			}
			country_event = { id = endgame_unity.101 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 19
					num_pops < 40
				}
			}
			country_event = { id = endgame_unity.102 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 39
					num_pops < 60
				}
			}
			country_event = { id = endgame_unity.103 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 59
					num_pops < 80
				}
			}
			country_event = { id = endgame_unity.104 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 79
					num_pops < 100
				}
			}
			country_event = { id = endgame_unity.105 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 99
					num_pops < 125
				}
			}
			country_event = { id = endgame_unity.106 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 124
					num_pops < 150
				}
			}
			country_event = { id = endgame_unity.107 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 149
					num_pops < 175
				}
			}
			country_event = { id = endgame_unity.108 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 174
					num_pops < 200
				}
			}
			country_event = { id = endgame_unity.109 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 199
					num_pops < 250
				}
			}
			country_event = { id = endgame_unity.110 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 249
					num_pops < 300
				}
			}
			country_event = { id = endgame_unity.111 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 299
					num_pops < 350
				}
			}
			country_event = { id = endgame_unity.112 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 349
					num_pops < 400
				}
			}
			country_event = { id = endgame_unity.113 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 399
					num_pops < 450
				}
			}
			country_event = { id = endgame_unity.114 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 449
					num_pops < 500
				}
			}
			country_event = { id = endgame_unity.115 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 499
					num_pops < 600
				}
			}
			country_event = { id = endgame_unity.116 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 599
					num_pops < 700
				}
			}
			country_event = { id = endgame_unity.117 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 699
					num_pops < 800
				}
			}
			country_event = { id = endgame_unity.118 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 799
					num_pops < 900
				}
			}
			country_event = { id = endgame_unity.119 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 899
					num_pops < 1000
				}
			}
			country_event = { id = endgame_unity.120 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 999
					num_pops < 1200
				}
			}
			country_event = { id = endgame_unity.121 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1199
					num_pops < 1400
				}
			}
			country_event = { id = endgame_unity.122 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1399
					num_pops < 1600
				}
			}
			country_event = { id = endgame_unity.123 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1599
					num_pops < 1800
				}
			}
			country_event = { id = endgame_unity.124 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1799
					num_pops < 2000
				}
			}
			country_event = { id = endgame_unity.125 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1999
					num_pops < 2500
				}
			}
			country_event = { id = endgame_unity.126 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 2499
					num_pops < 3000
				}
			}
			country_event = { id = endgame_unity.127 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 2999
					num_pops < 3500
				}
			}
			country_event = { id = endgame_unity.128 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 3499
					num_pops < 4000
				}
			}
			country_event = { id = endgame_unity.129 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 3999
					num_pops < 4500
				}
			}
			country_event = { id = endgame_unity.130 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 4499
					num_pops < 5000
				}
			}
			country_event = { id = endgame_unity.131 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 4999
					num_pops < 6000
				}
			}
			country_event = { id = endgame_unity.132 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 5999
					num_pops < 7000
				}
			}
			country_event = { id = endgame_unity.133 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 6999
					num_pops < 8000
				}
			}
			country_event = { id = endgame_unity.134 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 7999
					num_pops < 9000
				}
			}
			country_event = { id = endgame_unity.135 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 8999
					num_pops < 10000
				}
			}
			country_event = { id = endgame_unity.136 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 9999
					num_pops < 1000000000
				}
			}
			country_event = { id = endgame_unity.137 }
		}

	}
}




country_event = {
	id = endgame_unity.101
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_001
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_001
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_001
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_001
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_001
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.102
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_002
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_002
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_002
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_002
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_002
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.103
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_003
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_003
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_003
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_003
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_003
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.104
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_004
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_004
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_004
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_004
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_004
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.105
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_005
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_005
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_005
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_005
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_005
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.106
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_006
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_006
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_006
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_006
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_006
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.107
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_007
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_007
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_007
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_007
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_007
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.108
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_008
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_008
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_008
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_008
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_008
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.109
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_009
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_009
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_009
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_009
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_009
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.110
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_010
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_010
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_010
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_010
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_010
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.111
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_011
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_011
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_011
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_011
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_011
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.112
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_012
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_012
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_012
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_012
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_012
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.113
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_013
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_013
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_013
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_013
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_013
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.114
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_014
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_014
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_014
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_014
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_014
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.115
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_015
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_015
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_015
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_015
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_015
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.116
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_016
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_016
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_016
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_016
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_016
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.117
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_017
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_017
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_017
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_017
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_017
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.118
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_018
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_018
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_018
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_018
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_018
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.119
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_019
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_019
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_019
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_019
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_019
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.120
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_020
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_020
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_020
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_020
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_020
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.121
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_021
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_021
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_021
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_021
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_021
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.122
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_022
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_022
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_022
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_022
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_022
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.123
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_023
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_023
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_023
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_023
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_023
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.124
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_024
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_024
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_024
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_024
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_024
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.125
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_025
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_025
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_025
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_025
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_025
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.126
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_026
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_026
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_026
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_026
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_026
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.127
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_027
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_027
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_027
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_027
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_027
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.128
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_028
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_028
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_028
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_028
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_028
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.129
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_029
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_029
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_029
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_029
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_029
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.130
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_030
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_030
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_030
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_030
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_030
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.131
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_031
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_031
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_031
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_031
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_031
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.132
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_032
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_032
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_032
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_032
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_032
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.133
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_033
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_033
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_033
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_033
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_033
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.134
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_034
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_034
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_034
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_034
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_034
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.135
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_035
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_035
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_035
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_035
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_035
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.136
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_036
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_036
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_036
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_036
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_036
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.137
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_037
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_037
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_037
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_037
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_037
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
