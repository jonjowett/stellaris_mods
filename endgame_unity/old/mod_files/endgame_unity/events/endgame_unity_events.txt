# This file is programmatically generated, as this is the only practical way to get a unity cost that varies based on number of pops.
# For more details, please see the github repo: https://github.com/jonjowett/stellaris_mods

namespace = endgame_unity




@endgame_unity_cost_positive_101 =  13500
@endgame_unity_cost_negative_101 = -13500
@endgame_unity_cost_positive_102 =  17000
@endgame_unity_cost_negative_102 = -17000
@endgame_unity_cost_positive_103 =  20500
@endgame_unity_cost_negative_103 = -20500
@endgame_unity_cost_positive_104 =  24000
@endgame_unity_cost_negative_104 = -24000
@endgame_unity_cost_positive_105 =  27500
@endgame_unity_cost_negative_105 = -27500
@endgame_unity_cost_positive_106 =  31500
@endgame_unity_cost_negative_106 = -31500
@endgame_unity_cost_positive_107 =  35000
@endgame_unity_cost_negative_107 = -35000
@endgame_unity_cost_positive_108 =  39000
@endgame_unity_cost_negative_108 = -39000
@endgame_unity_cost_positive_109 =  43000
@endgame_unity_cost_negative_109 = -43000
@endgame_unity_cost_positive_110 =  47000
@endgame_unity_cost_negative_110 = -47000
@endgame_unity_cost_positive_111 =  51000
@endgame_unity_cost_negative_111 = -51000
@endgame_unity_cost_positive_112 =  55000
@endgame_unity_cost_negative_112 = -55000
@endgame_unity_cost_positive_113 =  59000
@endgame_unity_cost_negative_113 = -59000
@endgame_unity_cost_positive_114 =  63000
@endgame_unity_cost_negative_114 = -63000
@endgame_unity_cost_positive_115 =  67000
@endgame_unity_cost_negative_115 = -67000
@endgame_unity_cost_positive_116 =  71000
@endgame_unity_cost_negative_116 = -71000
@endgame_unity_cost_positive_117 =  76000
@endgame_unity_cost_negative_117 = -76000
@endgame_unity_cost_positive_118 =  80000
@endgame_unity_cost_negative_118 = -80000
@endgame_unity_cost_positive_119 =  85000
@endgame_unity_cost_negative_119 = -85000
@endgame_unity_cost_positive_120 =  89000
@endgame_unity_cost_negative_120 = -89000
@endgame_unity_cost_positive_121 =  94000
@endgame_unity_cost_negative_121 = -94000
@endgame_unity_cost_positive_122 =  98000
@endgame_unity_cost_negative_122 = -98000
@endgame_unity_cost_positive_123 =  102000
@endgame_unity_cost_negative_123 = -102000
@endgame_unity_cost_positive_124 =  108000
@endgame_unity_cost_negative_124 = -108000
@endgame_unity_cost_positive_125 =  112000
@endgame_unity_cost_negative_125 = -112000
@endgame_unity_cost_positive_126 =  118000
@endgame_unity_cost_negative_126 = -118000
@endgame_unity_cost_positive_127 =  124000
@endgame_unity_cost_negative_127 = -124000
@endgame_unity_cost_positive_128 =  130000
@endgame_unity_cost_negative_128 = -130000
@endgame_unity_cost_positive_129 =  136000
@endgame_unity_cost_negative_129 = -136000
@endgame_unity_cost_positive_130 =  142000
@endgame_unity_cost_negative_130 = -142000
@endgame_unity_cost_positive_131 =  148000
@endgame_unity_cost_negative_131 = -148000
@endgame_unity_cost_positive_132 =  156000
@endgame_unity_cost_negative_132 = -156000
@endgame_unity_cost_positive_133 =  162000
@endgame_unity_cost_negative_133 = -162000
@endgame_unity_cost_positive_134 =  168000
@endgame_unity_cost_negative_134 = -168000
@endgame_unity_cost_positive_135 =  176000
@endgame_unity_cost_negative_135 = -176000
@endgame_unity_cost_positive_136 =  182000
@endgame_unity_cost_negative_136 = -182000
@endgame_unity_cost_positive_137 =  190000
@endgame_unity_cost_negative_137 = -190000
@endgame_unity_cost_positive_138 =  196000
@endgame_unity_cost_negative_138 = -196000
@endgame_unity_cost_positive_139 =  205000
@endgame_unity_cost_negative_139 = -205000
@endgame_unity_cost_positive_140 =  210000
@endgame_unity_cost_negative_140 = -210000
@endgame_unity_cost_positive_141 =  220000
@endgame_unity_cost_negative_141 = -220000
@endgame_unity_cost_positive_142 =  225000
@endgame_unity_cost_negative_142 = -225000
@endgame_unity_cost_positive_143 =  230000
@endgame_unity_cost_negative_143 = -230000
@endgame_unity_cost_positive_144 =  240000
@endgame_unity_cost_negative_144 = -240000
@endgame_unity_cost_positive_145 =  245000
@endgame_unity_cost_negative_145 = -245000
@endgame_unity_cost_positive_146 =  260000
@endgame_unity_cost_negative_146 = -260000
@endgame_unity_cost_positive_147 =  275000
@endgame_unity_cost_negative_147 = -275000
@endgame_unity_cost_positive_148 =  290000
@endgame_unity_cost_negative_148 = -290000
@endgame_unity_cost_positive_149 =  305000
@endgame_unity_cost_negative_149 = -305000
@endgame_unity_cost_positive_150 =  325000
@endgame_unity_cost_negative_150 = -325000
@endgame_unity_cost_positive_151 =  340000
@endgame_unity_cost_negative_151 = -340000
@endgame_unity_cost_positive_152 =  360000
@endgame_unity_cost_negative_152 = -360000
@endgame_unity_cost_positive_153 =  375000
@endgame_unity_cost_negative_153 = -375000
@endgame_unity_cost_positive_154 =  395000
@endgame_unity_cost_negative_154 = -395000
@endgame_unity_cost_positive_155 =  410000
@endgame_unity_cost_negative_155 = -410000
@endgame_unity_cost_positive_156 =  430000
@endgame_unity_cost_negative_156 = -430000
@endgame_unity_cost_positive_157 =  450000
@endgame_unity_cost_negative_157 = -450000
@endgame_unity_cost_positive_158 =  470000
@endgame_unity_cost_negative_158 = -470000
@endgame_unity_cost_positive_159 =  490000
@endgame_unity_cost_negative_159 = -490000
@endgame_unity_cost_positive_160 =  510000
@endgame_unity_cost_negative_160 = -510000
@endgame_unity_cost_positive_161 =  530000
@endgame_unity_cost_negative_161 = -530000
@endgame_unity_cost_positive_162 =  550000
@endgame_unity_cost_negative_162 = -550000
@endgame_unity_cost_positive_163 =  570000
@endgame_unity_cost_negative_163 = -570000
@endgame_unity_cost_positive_164 =  590000
@endgame_unity_cost_negative_164 = -590000
@endgame_unity_cost_positive_165 =  610000
@endgame_unity_cost_negative_165 = -610000
@endgame_unity_cost_positive_166 =  650000
@endgame_unity_cost_negative_166 = -650000
@endgame_unity_cost_positive_167 =  690000
@endgame_unity_cost_negative_167 = -690000
@endgame_unity_cost_positive_168 =  740000
@endgame_unity_cost_negative_168 = -740000
@endgame_unity_cost_positive_169 =  790000
@endgame_unity_cost_negative_169 = -790000
@endgame_unity_cost_positive_170 =  840000
@endgame_unity_cost_negative_170 = -840000
@endgame_unity_cost_positive_171 =  890000
@endgame_unity_cost_negative_171 = -890000
@endgame_unity_cost_positive_172 =  940000
@endgame_unity_cost_negative_172 = -940000
@endgame_unity_cost_positive_173 =  1000000
@endgame_unity_cost_negative_173 = -1000000
@endgame_unity_cost_positive_174 =  1060000
@endgame_unity_cost_negative_174 = -1060000
@endgame_unity_cost_positive_175 =  1100000
@endgame_unity_cost_negative_175 = -1100000
@endgame_unity_cost_positive_176 =  1160000
@endgame_unity_cost_negative_176 = -1160000
@endgame_unity_cost_positive_177 =  1220000
@endgame_unity_cost_negative_177 = -1220000
@endgame_unity_cost_positive_178 =  1280000
@endgame_unity_cost_negative_178 = -1280000
@endgame_unity_cost_positive_179 =  1340000
@endgame_unity_cost_negative_179 = -1340000
@endgame_unity_cost_positive_180 =  1400000
@endgame_unity_cost_negative_180 = -1400000
@endgame_unity_cost_positive_181 =  1480000
@endgame_unity_cost_negative_181 = -1480000
@endgame_unity_cost_positive_182 =  1540000
@endgame_unity_cost_negative_182 = -1540000
@endgame_unity_cost_positive_183 =  1600000
@endgame_unity_cost_negative_183 = -1600000
@endgame_unity_cost_positive_184 =  1680000
@endgame_unity_cost_negative_184 = -1680000
@endgame_unity_cost_positive_185 =  1740000
@endgame_unity_cost_negative_185 = -1740000
@endgame_unity_cost_positive_186 =  1820000
@endgame_unity_cost_negative_186 = -1820000
@endgame_unity_cost_positive_187 =  1880000
@endgame_unity_cost_negative_187 = -1880000
@endgame_unity_cost_positive_188 =  1960000
@endgame_unity_cost_negative_188 = -1960000
@endgame_unity_cost_positive_189 =  2050000
@endgame_unity_cost_negative_189 = -2050000
@endgame_unity_cost_positive_190 =  2100000
@endgame_unity_cost_negative_190 = -2100000
@endgame_unity_cost_positive_191 =  2200000
@endgame_unity_cost_negative_191 = -2200000
@endgame_unity_cost_positive_192 =  2250000
@endgame_unity_cost_negative_192 = -2250000
@endgame_unity_cost_positive_193 =  2350000
@endgame_unity_cost_negative_193 = -2350000
@endgame_unity_cost_positive_194 =  2450000
@endgame_unity_cost_negative_194 = -2450000
@endgame_unity_cost_positive_195 =  2500000
@endgame_unity_cost_negative_195 = -2500000
@endgame_unity_cost_positive_196 =  2650000
@endgame_unity_cost_negative_196 = -2650000
@endgame_unity_cost_positive_197 =  2900000
@endgame_unity_cost_negative_197 = -2900000
@endgame_unity_cost_positive_198 =  3100000
@endgame_unity_cost_negative_198 = -3100000
@endgame_unity_cost_positive_199 =  3350000
@endgame_unity_cost_negative_199 = -3350000
@endgame_unity_cost_positive_200 =  3600000
@endgame_unity_cost_negative_200 = -3600000
@endgame_unity_cost_positive_201 =  3850000
@endgame_unity_cost_negative_201 = -3850000
@endgame_unity_cost_positive_202 =  4100000
@endgame_unity_cost_negative_202 = -4100000
@endgame_unity_cost_positive_203 =  4400000
@endgame_unity_cost_negative_203 = -4400000
@endgame_unity_cost_positive_204 =  4650000
@endgame_unity_cost_negative_204 = -4650000
@endgame_unity_cost_positive_205 =  4950000
@endgame_unity_cost_negative_205 = -4950000
@endgame_unity_cost_positive_206 =  5200000
@endgame_unity_cost_negative_206 = -5200000
@endgame_unity_cost_positive_207 =  5600000
@endgame_unity_cost_negative_207 = -5600000
@endgame_unity_cost_positive_208 =  5900000
@endgame_unity_cost_negative_208 = -5900000
@endgame_unity_cost_positive_209 =  6200000
@endgame_unity_cost_negative_209 = -6200000
@endgame_unity_cost_positive_210 =  6500000
@endgame_unity_cost_negative_210 = -6500000
@endgame_unity_cost_positive_211 =  6900000
@endgame_unity_cost_negative_211 = -6900000
@endgame_unity_cost_positive_212 =  7200000
@endgame_unity_cost_negative_212 = -7200000
@endgame_unity_cost_positive_213 =  7600000
@endgame_unity_cost_negative_213 = -7600000
@endgame_unity_cost_positive_214 =  7900000
@endgame_unity_cost_negative_214 = -7900000
@endgame_unity_cost_positive_215 =  8300000
@endgame_unity_cost_negative_215 = -8300000
@endgame_unity_cost_positive_216 =  8900000
@endgame_unity_cost_negative_216 = -8900000
@endgame_unity_cost_positive_217 =  9700000
@endgame_unity_cost_negative_217 = -9700000
@endgame_unity_cost_positive_218 =  10400000
@endgame_unity_cost_negative_218 = -10400000
@endgame_unity_cost_positive_219 =  11400000
@endgame_unity_cost_negative_219 = -11400000
@endgame_unity_cost_positive_220 =  12200000
@endgame_unity_cost_negative_220 = -12200000
@endgame_unity_cost_positive_221 =  13200000
@endgame_unity_cost_negative_221 = -13200000
@endgame_unity_cost_positive_222 =  14200000
@endgame_unity_cost_negative_222 = -14200000
@endgame_unity_cost_positive_223 =  15200000
@endgame_unity_cost_negative_223 = -15200000
@endgame_unity_cost_positive_224 =  16200000
@endgame_unity_cost_negative_224 = -16200000
@endgame_unity_cost_positive_225 =  17200000
@endgame_unity_cost_negative_225 = -17200000
@endgame_unity_cost_positive_226 =  18400000
@endgame_unity_cost_negative_226 = -18400000
@endgame_unity_cost_positive_227 =  19400000
@endgame_unity_cost_negative_227 = -19400000
@endgame_unity_cost_positive_228 =  20500000
@endgame_unity_cost_negative_228 = -20500000
@endgame_unity_cost_positive_229 =  22000000
@endgame_unity_cost_negative_229 = -22000000
@endgame_unity_cost_positive_230 =  23000000
@endgame_unity_cost_negative_230 = -23000000
@endgame_unity_cost_positive_231 =  24500000
@endgame_unity_cost_negative_231 = -24500000
@endgame_unity_cost_positive_232 =  25500000
@endgame_unity_cost_negative_232 = -25500000
@endgame_unity_cost_positive_233 =  27000000
@endgame_unity_cost_negative_233 = -27000000
@endgame_unity_cost_positive_234 =  28500000
@endgame_unity_cost_negative_234 = -28500000
@endgame_unity_cost_positive_235 =  29500000
@endgame_unity_cost_negative_235 = -29500000
@endgame_unity_cost_positive_236 =  32000000
@endgame_unity_cost_negative_236 = -32000000
@endgame_unity_cost_positive_237 =  35000000
@endgame_unity_cost_negative_237 = -35000000
@endgame_unity_cost_positive_238 =  38000000
@endgame_unity_cost_negative_238 = -38000000
@endgame_unity_cost_positive_239 =  41500000
@endgame_unity_cost_negative_239 = -41500000
@endgame_unity_cost_positive_240 =  45000000
@endgame_unity_cost_negative_240 = -45000000
@endgame_unity_cost_positive_241 =  48500000
@endgame_unity_cost_negative_241 = -48500000
@endgame_unity_cost_positive_242 =  52000000
@endgame_unity_cost_negative_242 = -52000000
@endgame_unity_cost_positive_243 =  56000000
@endgame_unity_cost_negative_243 = -56000000
@endgame_unity_cost_positive_244 =  60000000
@endgame_unity_cost_negative_244 = -60000000
@endgame_unity_cost_positive_245 =  64000000
@endgame_unity_cost_negative_245 = -64000000
@endgame_unity_cost_positive_246 =  68000000
@endgame_unity_cost_negative_246 = -68000000
@endgame_unity_cost_positive_247 =  72000000
@endgame_unity_cost_negative_247 = -72000000
@endgame_unity_cost_positive_248 =  77000000
@endgame_unity_cost_negative_248 = -77000000
@endgame_unity_cost_positive_249 =  82000000
@endgame_unity_cost_negative_249 = -82000000
@endgame_unity_cost_positive_250 =  86000000
@endgame_unity_cost_negative_250 = -86000000
@endgame_unity_cost_positive_251 =  91000000
@endgame_unity_cost_negative_251 = -91000000
@endgame_unity_cost_positive_252 =  96000000
@endgame_unity_cost_negative_252 = -96000000
@endgame_unity_cost_positive_253 =  101000000
@endgame_unity_cost_negative_253 = -101000000
@endgame_unity_cost_positive_254 =  107000000
@endgame_unity_cost_negative_254 = -107000000
@endgame_unity_cost_positive_255 =  112000000
@endgame_unity_cost_negative_255 = -112000000
@endgame_unity_cost_positive_256 =  118000000
@endgame_unity_cost_negative_256 = -118000000
@endgame_unity_cost_positive_257 =  123000000
@endgame_unity_cost_negative_257 = -123000000
@endgame_unity_cost_positive_258 =  129000000
@endgame_unity_cost_negative_258 = -129000000
@endgame_unity_cost_positive_259 =  135000000
@endgame_unity_cost_negative_259 = -135000000
@endgame_unity_cost_positive_260 =  141000000
@endgame_unity_cost_negative_260 = -141000000
@endgame_unity_cost_positive_261 =  148000000
@endgame_unity_cost_negative_261 = -148000000
@endgame_unity_cost_positive_262 =  154000000
@endgame_unity_cost_negative_262 = -154000000
@endgame_unity_cost_positive_263 =  161000000
@endgame_unity_cost_negative_263 = -161000000
@endgame_unity_cost_positive_264 =  167000000
@endgame_unity_cost_negative_264 = -167000000
@endgame_unity_cost_positive_265 =  174000000
@endgame_unity_cost_negative_265 = -174000000
@endgame_unity_cost_positive_266 =  200000000
@endgame_unity_cost_negative_266 = -200000000





event = {
	# Trigger the main event for all player countries
	id = endgame_unity.1
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_country = {
			limit = { is_ai = no }
			country_event = {
				id = endgame_unity.2
			}
		}
	}
}

country_event = {
	id = endgame_unity.2
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				AND = {
					num_pops > -1
					num_pops < 20
				}
			}
			country_event = { id = endgame_unity.101 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 19
					num_pops < 40
				}
			}
			country_event = { id = endgame_unity.102 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 39
					num_pops < 60
				}
			}
			country_event = { id = endgame_unity.103 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 59
					num_pops < 80
				}
			}
			country_event = { id = endgame_unity.104 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 79
					num_pops < 100
				}
			}
			country_event = { id = endgame_unity.105 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 99
					num_pops < 120
				}
			}
			country_event = { id = endgame_unity.106 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 119
					num_pops < 140
				}
			}
			country_event = { id = endgame_unity.107 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 139
					num_pops < 160
				}
			}
			country_event = { id = endgame_unity.108 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 159
					num_pops < 180
				}
			}
			country_event = { id = endgame_unity.109 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 179
					num_pops < 200
				}
			}
			country_event = { id = endgame_unity.110 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 199
					num_pops < 220
				}
			}
			country_event = { id = endgame_unity.111 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 219
					num_pops < 240
				}
			}
			country_event = { id = endgame_unity.112 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 239
					num_pops < 260
				}
			}
			country_event = { id = endgame_unity.113 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 259
					num_pops < 280
				}
			}
			country_event = { id = endgame_unity.114 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 279
					num_pops < 300
				}
			}
			country_event = { id = endgame_unity.115 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 299
					num_pops < 320
				}
			}
			country_event = { id = endgame_unity.116 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 319
					num_pops < 340
				}
			}
			country_event = { id = endgame_unity.117 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 339
					num_pops < 360
				}
			}
			country_event = { id = endgame_unity.118 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 359
					num_pops < 380
				}
			}
			country_event = { id = endgame_unity.119 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 379
					num_pops < 400
				}
			}
			country_event = { id = endgame_unity.120 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 399
					num_pops < 420
				}
			}
			country_event = { id = endgame_unity.121 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 419
					num_pops < 440
				}
			}
			country_event = { id = endgame_unity.122 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 439
					num_pops < 460
				}
			}
			country_event = { id = endgame_unity.123 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 459
					num_pops < 480
				}
			}
			country_event = { id = endgame_unity.124 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 479
					num_pops < 500
				}
			}
			country_event = { id = endgame_unity.125 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 499
					num_pops < 525
				}
			}
			country_event = { id = endgame_unity.126 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 524
					num_pops < 550
				}
			}
			country_event = { id = endgame_unity.127 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 549
					num_pops < 575
				}
			}
			country_event = { id = endgame_unity.128 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 574
					num_pops < 600
				}
			}
			country_event = { id = endgame_unity.129 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 599
					num_pops < 625
				}
			}
			country_event = { id = endgame_unity.130 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 624
					num_pops < 650
				}
			}
			country_event = { id = endgame_unity.131 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 649
					num_pops < 675
				}
			}
			country_event = { id = endgame_unity.132 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 674
					num_pops < 700
				}
			}
			country_event = { id = endgame_unity.133 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 699
					num_pops < 725
				}
			}
			country_event = { id = endgame_unity.134 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 724
					num_pops < 750
				}
			}
			country_event = { id = endgame_unity.135 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 749
					num_pops < 775
				}
			}
			country_event = { id = endgame_unity.136 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 774
					num_pops < 800
				}
			}
			country_event = { id = endgame_unity.137 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 799
					num_pops < 825
				}
			}
			country_event = { id = endgame_unity.138 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 824
					num_pops < 850
				}
			}
			country_event = { id = endgame_unity.139 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 849
					num_pops < 875
				}
			}
			country_event = { id = endgame_unity.140 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 874
					num_pops < 900
				}
			}
			country_event = { id = endgame_unity.141 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 899
					num_pops < 925
				}
			}
			country_event = { id = endgame_unity.142 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 924
					num_pops < 950
				}
			}
			country_event = { id = endgame_unity.143 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 949
					num_pops < 975
				}
			}
			country_event = { id = endgame_unity.144 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 974
					num_pops < 1000
				}
			}
			country_event = { id = endgame_unity.145 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 999
					num_pops < 1050
				}
			}
			country_event = { id = endgame_unity.146 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1049
					num_pops < 1100
				}
			}
			country_event = { id = endgame_unity.147 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1099
					num_pops < 1150
				}
			}
			country_event = { id = endgame_unity.148 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1149
					num_pops < 1200
				}
			}
			country_event = { id = endgame_unity.149 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1199
					num_pops < 1250
				}
			}
			country_event = { id = endgame_unity.150 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1249
					num_pops < 1300
				}
			}
			country_event = { id = endgame_unity.151 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1299
					num_pops < 1350
				}
			}
			country_event = { id = endgame_unity.152 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1349
					num_pops < 1400
				}
			}
			country_event = { id = endgame_unity.153 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1399
					num_pops < 1450
				}
			}
			country_event = { id = endgame_unity.154 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1449
					num_pops < 1500
				}
			}
			country_event = { id = endgame_unity.155 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1499
					num_pops < 1550
				}
			}
			country_event = { id = endgame_unity.156 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1549
					num_pops < 1600
				}
			}
			country_event = { id = endgame_unity.157 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1599
					num_pops < 1650
				}
			}
			country_event = { id = endgame_unity.158 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1649
					num_pops < 1700
				}
			}
			country_event = { id = endgame_unity.159 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1699
					num_pops < 1750
				}
			}
			country_event = { id = endgame_unity.160 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1749
					num_pops < 1800
				}
			}
			country_event = { id = endgame_unity.161 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1799
					num_pops < 1850
				}
			}
			country_event = { id = endgame_unity.162 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1849
					num_pops < 1900
				}
			}
			country_event = { id = endgame_unity.163 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1899
					num_pops < 1950
				}
			}
			country_event = { id = endgame_unity.164 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1949
					num_pops < 2000
				}
			}
			country_event = { id = endgame_unity.165 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 1999
					num_pops < 2100
				}
			}
			country_event = { id = endgame_unity.166 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 2099
					num_pops < 2200
				}
			}
			country_event = { id = endgame_unity.167 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 2199
					num_pops < 2300
				}
			}
			country_event = { id = endgame_unity.168 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 2299
					num_pops < 2400
				}
			}
			country_event = { id = endgame_unity.169 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 2399
					num_pops < 2500
				}
			}
			country_event = { id = endgame_unity.170 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 2499
					num_pops < 2600
				}
			}
			country_event = { id = endgame_unity.171 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 2599
					num_pops < 2700
				}
			}
			country_event = { id = endgame_unity.172 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 2699
					num_pops < 2800
				}
			}
			country_event = { id = endgame_unity.173 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 2799
					num_pops < 2900
				}
			}
			country_event = { id = endgame_unity.174 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 2899
					num_pops < 3000
				}
			}
			country_event = { id = endgame_unity.175 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 2999
					num_pops < 3100
				}
			}
			country_event = { id = endgame_unity.176 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 3099
					num_pops < 3200
				}
			}
			country_event = { id = endgame_unity.177 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 3199
					num_pops < 3300
				}
			}
			country_event = { id = endgame_unity.178 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 3299
					num_pops < 3400
				}
			}
			country_event = { id = endgame_unity.179 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 3399
					num_pops < 3500
				}
			}
			country_event = { id = endgame_unity.180 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 3499
					num_pops < 3600
				}
			}
			country_event = { id = endgame_unity.181 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 3599
					num_pops < 3700
				}
			}
			country_event = { id = endgame_unity.182 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 3699
					num_pops < 3800
				}
			}
			country_event = { id = endgame_unity.183 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 3799
					num_pops < 3900
				}
			}
			country_event = { id = endgame_unity.184 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 3899
					num_pops < 4000
				}
			}
			country_event = { id = endgame_unity.185 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 3999
					num_pops < 4100
				}
			}
			country_event = { id = endgame_unity.186 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 4099
					num_pops < 4200
				}
			}
			country_event = { id = endgame_unity.187 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 4199
					num_pops < 4300
				}
			}
			country_event = { id = endgame_unity.188 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 4299
					num_pops < 4400
				}
			}
			country_event = { id = endgame_unity.189 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 4399
					num_pops < 4500
				}
			}
			country_event = { id = endgame_unity.190 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 4499
					num_pops < 4600
				}
			}
			country_event = { id = endgame_unity.191 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 4599
					num_pops < 4700
				}
			}
			country_event = { id = endgame_unity.192 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 4699
					num_pops < 4800
				}
			}
			country_event = { id = endgame_unity.193 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 4799
					num_pops < 4900
				}
			}
			country_event = { id = endgame_unity.194 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 4899
					num_pops < 5000
				}
			}
			country_event = { id = endgame_unity.195 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 4999
					num_pops < 5250
				}
			}
			country_event = { id = endgame_unity.196 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 5249
					num_pops < 5500
				}
			}
			country_event = { id = endgame_unity.197 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 5499
					num_pops < 5750
				}
			}
			country_event = { id = endgame_unity.198 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 5749
					num_pops < 6000
				}
			}
			country_event = { id = endgame_unity.199 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 5999
					num_pops < 6250
				}
			}
			country_event = { id = endgame_unity.200 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 6249
					num_pops < 6500
				}
			}
			country_event = { id = endgame_unity.201 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 6499
					num_pops < 6750
				}
			}
			country_event = { id = endgame_unity.202 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 6749
					num_pops < 7000
				}
			}
			country_event = { id = endgame_unity.203 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 6999
					num_pops < 7250
				}
			}
			country_event = { id = endgame_unity.204 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 7249
					num_pops < 7500
				}
			}
			country_event = { id = endgame_unity.205 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 7499
					num_pops < 7750
				}
			}
			country_event = { id = endgame_unity.206 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 7749
					num_pops < 8000
				}
			}
			country_event = { id = endgame_unity.207 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 7999
					num_pops < 8250
				}
			}
			country_event = { id = endgame_unity.208 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 8249
					num_pops < 8500
				}
			}
			country_event = { id = endgame_unity.209 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 8499
					num_pops < 8750
				}
			}
			country_event = { id = endgame_unity.210 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 8749
					num_pops < 9000
				}
			}
			country_event = { id = endgame_unity.211 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 8999
					num_pops < 9250
				}
			}
			country_event = { id = endgame_unity.212 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 9249
					num_pops < 9500
				}
			}
			country_event = { id = endgame_unity.213 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 9499
					num_pops < 9750
				}
			}
			country_event = { id = endgame_unity.214 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 9749
					num_pops < 10000
				}
			}
			country_event = { id = endgame_unity.215 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 9999
					num_pops < 10500
				}
			}
			country_event = { id = endgame_unity.216 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 10499
					num_pops < 11000
				}
			}
			country_event = { id = endgame_unity.217 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 10999
					num_pops < 11500
				}
			}
			country_event = { id = endgame_unity.218 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 11499
					num_pops < 12000
				}
			}
			country_event = { id = endgame_unity.219 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 11999
					num_pops < 12500
				}
			}
			country_event = { id = endgame_unity.220 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 12499
					num_pops < 13000
				}
			}
			country_event = { id = endgame_unity.221 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 12999
					num_pops < 13500
				}
			}
			country_event = { id = endgame_unity.222 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 13499
					num_pops < 14000
				}
			}
			country_event = { id = endgame_unity.223 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 13999
					num_pops < 14500
				}
			}
			country_event = { id = endgame_unity.224 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 14499
					num_pops < 15000
				}
			}
			country_event = { id = endgame_unity.225 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 14999
					num_pops < 15500
				}
			}
			country_event = { id = endgame_unity.226 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 15499
					num_pops < 16000
				}
			}
			country_event = { id = endgame_unity.227 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 15999
					num_pops < 16500
				}
			}
			country_event = { id = endgame_unity.228 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 16499
					num_pops < 17000
				}
			}
			country_event = { id = endgame_unity.229 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 16999
					num_pops < 17500
				}
			}
			country_event = { id = endgame_unity.230 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 17499
					num_pops < 18000
				}
			}
			country_event = { id = endgame_unity.231 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 17999
					num_pops < 18500
				}
			}
			country_event = { id = endgame_unity.232 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 18499
					num_pops < 19000
				}
			}
			country_event = { id = endgame_unity.233 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 18999
					num_pops < 19500
				}
			}
			country_event = { id = endgame_unity.234 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 19499
					num_pops < 20000
				}
			}
			country_event = { id = endgame_unity.235 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 19999
					num_pops < 21000
				}
			}
			country_event = { id = endgame_unity.236 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 20999
					num_pops < 22000
				}
			}
			country_event = { id = endgame_unity.237 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 21999
					num_pops < 23000
				}
			}
			country_event = { id = endgame_unity.238 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 22999
					num_pops < 24000
				}
			}
			country_event = { id = endgame_unity.239 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 23999
					num_pops < 25000
				}
			}
			country_event = { id = endgame_unity.240 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 24999
					num_pops < 26000
				}
			}
			country_event = { id = endgame_unity.241 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 25999
					num_pops < 27000
				}
			}
			country_event = { id = endgame_unity.242 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 26999
					num_pops < 28000
				}
			}
			country_event = { id = endgame_unity.243 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 27999
					num_pops < 29000
				}
			}
			country_event = { id = endgame_unity.244 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 28999
					num_pops < 30000
				}
			}
			country_event = { id = endgame_unity.245 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 29999
					num_pops < 31000
				}
			}
			country_event = { id = endgame_unity.246 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 30999
					num_pops < 32000
				}
			}
			country_event = { id = endgame_unity.247 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 31999
					num_pops < 33000
				}
			}
			country_event = { id = endgame_unity.248 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 32999
					num_pops < 34000
				}
			}
			country_event = { id = endgame_unity.249 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 33999
					num_pops < 35000
				}
			}
			country_event = { id = endgame_unity.250 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 34999
					num_pops < 36000
				}
			}
			country_event = { id = endgame_unity.251 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 35999
					num_pops < 37000
				}
			}
			country_event = { id = endgame_unity.252 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 36999
					num_pops < 38000
				}
			}
			country_event = { id = endgame_unity.253 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 37999
					num_pops < 39000
				}
			}
			country_event = { id = endgame_unity.254 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 38999
					num_pops < 40000
				}
			}
			country_event = { id = endgame_unity.255 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 39999
					num_pops < 41000
				}
			}
			country_event = { id = endgame_unity.256 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 40999
					num_pops < 42000
				}
			}
			country_event = { id = endgame_unity.257 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 41999
					num_pops < 43000
				}
			}
			country_event = { id = endgame_unity.258 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 42999
					num_pops < 44000
				}
			}
			country_event = { id = endgame_unity.259 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 43999
					num_pops < 45000
				}
			}
			country_event = { id = endgame_unity.260 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 44999
					num_pops < 46000
				}
			}
			country_event = { id = endgame_unity.261 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 45999
					num_pops < 47000
				}
			}
			country_event = { id = endgame_unity.262 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 46999
					num_pops < 48000
				}
			}
			country_event = { id = endgame_unity.263 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 47999
					num_pops < 49000
				}
			}
			country_event = { id = endgame_unity.264 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 48999
					num_pops < 50000
				}
			}
			country_event = { id = endgame_unity.265 }
		}
		if = {
			limit = {
				AND = {
					num_pops > 49999
					num_pops < 1000000000
				}
			}
			country_event = { id = endgame_unity.266 }
		}

	}
}




country_event = {
	id = endgame_unity.101
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_101
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_101
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_101
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_101
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_101
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.102
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_102
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_102
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_102
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_102
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_102
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.103
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_103
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_103
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_103
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_103
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_103
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.104
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_104
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_104
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_104
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_104
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_104
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.105
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_105
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_105
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_105
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_105
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_105
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.106
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_106
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_106
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_106
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_106
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_106
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.107
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_107
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_107
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_107
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_107
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_107
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.108
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_108
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_108
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_108
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_108
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_108
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.109
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_109
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_109
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_109
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_109
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_109
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.110
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_110
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_110
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_110
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_110
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_110
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.111
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_111
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_111
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_111
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_111
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_111
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.112
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_112
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_112
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_112
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_112
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_112
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.113
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_113
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_113
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_113
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_113
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_113
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.114
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_114
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_114
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_114
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_114
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_114
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.115
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_115
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_115
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_115
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_115
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_115
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.116
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_116
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_116
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_116
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_116
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_116
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.117
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_117
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_117
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_117
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_117
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_117
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.118
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_118
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_118
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_118
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_118
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_118
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.119
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_119
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_119
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_119
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_119
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_119
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.120
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_120
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_120
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_120
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_120
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_120
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.121
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_121
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_121
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_121
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_121
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_121
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.122
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_122
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_122
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_122
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_122
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_122
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.123
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_123
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_123
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_123
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_123
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_123
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.124
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_124
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_124
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_124
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_124
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_124
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.125
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_125
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_125
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_125
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_125
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_125
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.126
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_126
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_126
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_126
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_126
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_126
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.127
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_127
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_127
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_127
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_127
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_127
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.128
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_128
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_128
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_128
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_128
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_128
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.129
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_129
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_129
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_129
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_129
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_129
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.130
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_130
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_130
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_130
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_130
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_130
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.131
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_131
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_131
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_131
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_131
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_131
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.132
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_132
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_132
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_132
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_132
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_132
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.133
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_133
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_133
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_133
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_133
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_133
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.134
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_134
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_134
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_134
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_134
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_134
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.135
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_135
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_135
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_135
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_135
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_135
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.136
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_136
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_136
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_136
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_136
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_136
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.137
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_137
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_137
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_137
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_137
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_137
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.138
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_138
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_138
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_138
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_138
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_138
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.139
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_139
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_139
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_139
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_139
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_139
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.140
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_140
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_140
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_140
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_140
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_140
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.141
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_141
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_141
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_141
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_141
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_141
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.142
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_142
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_142
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_142
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_142
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_142
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.143
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_143
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_143
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_143
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_143
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_143
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.144
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_144
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_144
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_144
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_144
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_144
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.145
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_145
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_145
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_145
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_145
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_145
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.146
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_146
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_146
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_146
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_146
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_146
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.147
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_147
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_147
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_147
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_147
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_147
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.148
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_148
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_148
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_148
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_148
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_148
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.149
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_149
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_149
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_149
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_149
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_149
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.150
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_150
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_150
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_150
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_150
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_150
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.151
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_151
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_151
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_151
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_151
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_151
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.152
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_152
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_152
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_152
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_152
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_152
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.153
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_153
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_153
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_153
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_153
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_153
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.154
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_154
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_154
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_154
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_154
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_154
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.155
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_155
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_155
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_155
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_155
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_155
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.156
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_156
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_156
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_156
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_156
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_156
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.157
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_157
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_157
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_157
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_157
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_157
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.158
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_158
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_158
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_158
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_158
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_158
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.159
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_159
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_159
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_159
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_159
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_159
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.160
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_160
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_160
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_160
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_160
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_160
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.161
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_161
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_161
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_161
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_161
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_161
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.162
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_162
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_162
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_162
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_162
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_162
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.163
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_163
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_163
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_163
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_163
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_163
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.164
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_164
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_164
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_164
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_164
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_164
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.165
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_165
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_165
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_165
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_165
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_165
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.166
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_166
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_166
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_166
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_166
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_166
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.167
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_167
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_167
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_167
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_167
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_167
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.168
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_168
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_168
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_168
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_168
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_168
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.169
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_169
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_169
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_169
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_169
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_169
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.170
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_170
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_170
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_170
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_170
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_170
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.171
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_171
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_171
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_171
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_171
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_171
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.172
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_172
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_172
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_172
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_172
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_172
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.173
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_173
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_173
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_173
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_173
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_173
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.174
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_174
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_174
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_174
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_174
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_174
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.175
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_175
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_175
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_175
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_175
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_175
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.176
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_176
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_176
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_176
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_176
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_176
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.177
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_177
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_177
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_177
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_177
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_177
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.178
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_178
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_178
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_178
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_178
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_178
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.179
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_179
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_179
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_179
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_179
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_179
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.180
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_180
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_180
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_180
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_180
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_180
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.181
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_181
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_181
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_181
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_181
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_181
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.182
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_182
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_182
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_182
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_182
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_182
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.183
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_183
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_183
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_183
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_183
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_183
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.184
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_184
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_184
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_184
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_184
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_184
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.185
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_185
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_185
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_185
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_185
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_185
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.186
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_186
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_186
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_186
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_186
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_186
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.187
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_187
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_187
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_187
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_187
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_187
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.188
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_188
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_188
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_188
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_188
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_188
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.189
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_189
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_189
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_189
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_189
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_189
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.190
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_190
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_190
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_190
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_190
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_190
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.191
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_191
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_191
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_191
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_191
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_191
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.192
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_192
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_192
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_192
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_192
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_192
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.193
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_193
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_193
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_193
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_193
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_193
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.194
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_194
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_194
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_194
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_194
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_194
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.195
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_195
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_195
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_195
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_195
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_195
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.196
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_196
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_196
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_196
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_196
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_196
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.197
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_197
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_197
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_197
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_197
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_197
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.198
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_198
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_198
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_198
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_198
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_198
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.199
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_199
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_199
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_199
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_199
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_199
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.200
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_200
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_200
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_200
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_200
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_200
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.201
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_201
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_201
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_201
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_201
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_201
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.202
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_202
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_202
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_202
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_202
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_202
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.203
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_203
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_203
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_203
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_203
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_203
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.204
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_204
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_204
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_204
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_204
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_204
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.205
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_205
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_205
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_205
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_205
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_205
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.206
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_206
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_206
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_206
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_206
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_206
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.207
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_207
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_207
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_207
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_207
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_207
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.208
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_208
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_208
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_208
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_208
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_208
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.209
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_209
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_209
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_209
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_209
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_209
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.210
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_210
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_210
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_210
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_210
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_210
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.211
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_211
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_211
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_211
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_211
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_211
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.212
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_212
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_212
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_212
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_212
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_212
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.213
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_213
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_213
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_213
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_213
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_213
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.214
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_214
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_214
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_214
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_214
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_214
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.215
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_215
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_215
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_215
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_215
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_215
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.216
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_216
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_216
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_216
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_216
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_216
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.217
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_217
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_217
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_217
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_217
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_217
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.218
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_218
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_218
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_218
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_218
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_218
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.219
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_219
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_219
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_219
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_219
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_219
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.220
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_220
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_220
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_220
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_220
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_220
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.221
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_221
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_221
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_221
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_221
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_221
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.222
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_222
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_222
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_222
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_222
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_222
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.223
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_223
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_223
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_223
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_223
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_223
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.224
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_224
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_224
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_224
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_224
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_224
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.225
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_225
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_225
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_225
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_225
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_225
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.226
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_226
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_226
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_226
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_226
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_226
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.227
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_227
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_227
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_227
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_227
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_227
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.228
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_228
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_228
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_228
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_228
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_228
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.229
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_229
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_229
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_229
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_229
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_229
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.230
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_230
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_230
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_230
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_230
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_230
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.231
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_231
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_231
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_231
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_231
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_231
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.232
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_232
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_232
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_232
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_232
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_232
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.233
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_233
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_233
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_233
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_233
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_233
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.234
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_234
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_234
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_234
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_234
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_234
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.235
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_235
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_235
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_235
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_235
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_235
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.236
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_236
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_236
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_236
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_236
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_236
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.237
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_237
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_237
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_237
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_237
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_237
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.238
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_238
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_238
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_238
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_238
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_238
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.239
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_239
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_239
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_239
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_239
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_239
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.240
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_240
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_240
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_240
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_240
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_240
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.241
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_241
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_241
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_241
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_241
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_241
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.242
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_242
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_242
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_242
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_242
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_242
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.243
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_243
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_243
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_243
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_243
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_243
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.244
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_244
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_244
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_244
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_244
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_244
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.245
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_245
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_245
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_245
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_245
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_245
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.246
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_246
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_246
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_246
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_246
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_246
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.247
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_247
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_247
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_247
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_247
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_247
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.248
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_248
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_248
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_248
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_248
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_248
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.249
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_249
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_249
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_249
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_249
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_249
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.250
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_250
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_250
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_250
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_250
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_250
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.251
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_251
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_251
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_251
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_251
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_251
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.252
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_252
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_252
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_252
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_252
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_252
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.253
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_253
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_253
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_253
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_253
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_253
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.254
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_254
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_254
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_254
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_254
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_254
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.255
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_255
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_255
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_255
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_255
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_255
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.256
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_256
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_256
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_256
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_256
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_256
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.257
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_257
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_257
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_257
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_257
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_257
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.258
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_258
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_258
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_258
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_258
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_258
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.259
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_259
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_259
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_259
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_259
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_259
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.260
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_260
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_260
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_260
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_260
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_260
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.261
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_261
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_261
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_261
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_261
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_261
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.262
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_262
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_262
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_262
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_262
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_262
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.263
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_263
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_263
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_263
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_263
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_263
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.264
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_264
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_264
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_264
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_264
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_264
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.265
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_265
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_265
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_265
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_265
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_265
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
country_event = {
	id = endgame_unity.266
	is_triggered_only = yes
	
	title = endgame_unity.10.title
	desc = endgame_unity.10.desc
	picture = GFX_evt_throne_room
	show_sound = event_radio_chatter
	
	trigger = {
		unity > @endgame_unity_cost_positive_266
		NOT = { has_country_flag = endgame_unity_dialog_open }
		NOT = { has_country_flag = endgame_unity_complete }
		NOT = { has_modifier = endgame_unity_spend_refused }
	}
	
	immediate = { set_country_flag = endgame_unity_dialog_open }
	
	
	
	#Upgrade influence generation
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_influence_1
				has_modifier = endgame_unity_influence_2
				has_modifier = endgame_unity_influence_3
				has_modifier = endgame_unity_influence_4
				has_modifier = endgame_unity_influence_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		add_modifier = {
			modifier = "endgame_unity_influence_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_influence_1
		add_modifier = {
			modifier = "endgame_unity_influence_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_influence_2
		add_modifier = {
			modifier = "endgame_unity_influence_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_influence_3
		add_modifier = {
			modifier = "endgame_unity_influence_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.influence.title
		trigger = {
			has_modifier = endgame_unity_influence_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_influence_4
		add_modifier = {
			modifier = "endgame_unity_influence_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	
	
	
	#Upgrade research speed
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_research_1
				has_modifier = endgame_unity_research_2
				has_modifier = endgame_unity_research_3
				has_modifier = endgame_unity_research_4
				has_modifier = endgame_unity_research_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		add_modifier = {
			modifier = "endgame_unity_research_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_research_1
		add_modifier = {
			modifier = "endgame_unity_research_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_research_2
		add_modifier = {
			modifier = "endgame_unity_research_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_research_3
		add_modifier = {
			modifier = "endgame_unity_research_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.research.title
		trigger = {
			has_modifier = endgame_unity_research_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_research_4
		add_modifier = {
			modifier = "endgame_unity_research_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	
	
	
	#Upgrade fleet cap
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_fleetcap_1
				has_modifier = endgame_unity_fleetcap_2
				has_modifier = endgame_unity_fleetcap_3
				has_modifier = endgame_unity_fleetcap_4
				has_modifier = endgame_unity_fleetcap_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		add_modifier = {
			modifier = "endgame_unity_fleetcap_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_fleetcap_1
		add_modifier = {
			modifier = "endgame_unity_fleetcap_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_fleetcap_2
		add_modifier = {
			modifier = "endgame_unity_fleetcap_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_fleetcap_3
		add_modifier = {
			modifier = "endgame_unity_fleetcap_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.fleetcap.title
		trigger = {
			has_modifier = endgame_unity_fleetcap_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_fleetcap_4
		add_modifier = {
			modifier = "endgame_unity_fleetcap_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	
	
	
	#Upgrade megastructure build speed and cost
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_megastructure_1
				has_modifier = endgame_unity_megastructure_2
				has_modifier = endgame_unity_megastructure_3
				has_modifier = endgame_unity_megastructure_4
				has_modifier = endgame_unity_megastructure_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
			# Player can only select this buff if they can build or repair megastructures
			OR = {
				has_technology = tech_mega_engineering
				has_ascension_perk = ap_the_circle_of_life
				has_ascension_perk = ap_galactic_wonders
				has_ascension_perk = ap_voidborn
			}
		}
		add_modifier = {
			modifier = "endgame_unity_megastructure_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_megastructure_1
		add_modifier = {
			modifier = "endgame_unity_megastructure_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_megastructure_2
		add_modifier = {
			modifier = "endgame_unity_megastructure_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_megastructure_3
		add_modifier = {
			modifier = "endgame_unity_megastructure_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.megastructure.title
		trigger = {
			has_modifier = endgame_unity_megastructure_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_megastructure_4
		add_modifier = {
			modifier = "endgame_unity_megastructure_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	
	
	
	#Upgrade ship weapons
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_weapons_1
				has_modifier = endgame_unity_weapons_2
				has_modifier = endgame_unity_weapons_3
				has_modifier = endgame_unity_weapons_4
				has_modifier = endgame_unity_weapons_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		add_modifier = {
			modifier = "endgame_unity_weapons_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_weapons_1
		add_modifier = {
			modifier = "endgame_unity_weapons_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_weapons_2
		add_modifier = {
			modifier = "endgame_unity_weapons_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_weapons_3
		add_modifier = {
			modifier = "endgame_unity_weapons_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.weapons.title
		trigger = {
			has_modifier = endgame_unity_weapons_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_weapons_4
		add_modifier = {
			modifier = "endgame_unity_weapons_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	
	
	
	#Upgrade leaders by allowing increasing max leader level and leader experience gain
	#Note that increasing max leader level on its own does not affect the leader level cap. (That requires a modification to the defines.)
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_leader_1
				has_modifier = endgame_unity_leader_2
				has_modifier = endgame_unity_leader_3
				has_modifier = endgame_unity_leader_4
				has_modifier = endgame_unity_leader_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		add_modifier = {
			modifier = "endgame_unity_leader_1"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_leader_1
		add_modifier = {
			modifier = "endgame_unity_leader_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_leader_2
		add_modifier = {
			modifier = "endgame_unity_leader_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_leader_3
		add_modifier = {
			modifier = "endgame_unity_leader_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.leader.title
		trigger = {
			has_modifier = endgame_unity_leader_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_leader_4
		add_modifier = {
			modifier = "endgame_unity_leader_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	
	
	
	#Upgrade geneticists by adding bio trait points and decreasing bio modification cost
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			NOT = {
				has_modifier = endgame_unity_geneticist_1
				has_modifier = endgame_unity_geneticist_2
				has_modifier = endgame_unity_geneticist_3
				has_modifier = endgame_unity_geneticist_4
				has_modifier = endgame_unity_geneticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
			has_technology = tech_gene_tailoring #Level 1 bio species editing
		}
		add_modifier = {
			modifier = "endgame_unity_geneticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_gene_expressions } }
			add_research_option = tech_gene_expressions
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_geneticist_1
		add_modifier = {
			modifier = "endgame_unity_geneticist_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_geneticist_2
		add_modifier = {
			modifier = "endgame_unity_geneticist_3"
			days = -1
		}
		add_research_option = tech_genetic_resequencing #Extra bonus for getting level 3! (Otherwise, the extra trait points will probably be useless.)
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_geneticist_3
		add_modifier = {
			modifier = "endgame_unity_geneticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.geneticist.title
		trigger = {
			has_modifier = endgame_unity_geneticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_geneticist_4
		add_modifier = {
			modifier = "endgame_unity_geneticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	
	
	
	#Upgrade roboticists by adding ROBOT robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			NOT = { has_authority = auth_machine_intelligence	} #Machines aren't eligible for ROBOT robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_1
				has_modifier = endgame_unity_roboticist_2
				has_modifier = endgame_unity_roboticist_3
				has_modifier = endgame_unity_roboticist_4
				has_modifier = endgame_unity_roboticist_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
			has_technology = tech_robomodding
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_1 } }
			add_research_option = tech_robomodding_points_1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_roboticist_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_2"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_robomodding_points_2 } }
			add_research_option = tech_robomodding_points_2
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_roboticist_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_roboticist_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.roboticist.title
		trigger = {
			has_modifier = endgame_unity_roboticist_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_roboticist_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	
	
	
	#Upgrade roboticists by adding MACHINE robomodding trait points and decreasing robot modification cost
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_authority = auth_machine_intelligence #Bio empires aren't eligible for MACHINE robomodding
			NOT = {
				has_modifier = endgame_unity_roboticist_m_1
				has_modifier = endgame_unity_roboticist_m_2
				has_modifier = endgame_unity_roboticist_m_3
				has_modifier = endgame_unity_roboticist_m_4
				has_modifier = endgame_unity_roboticist_m_5
			}
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
			has_technology = tech_robomodding_m
		}
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_1"
			days = -1
		}
		if = {
			limit = { NOT = { has_technology = tech_nanite_assemblers } }
			add_research_option = tech_nanite_assemblers
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_1
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_roboticist_m_1
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_2"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_2
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_roboticist_m_2
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_3"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_3
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_roboticist_m_3
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_4"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	option = {
		name = endgame_unity.10.roboticist_m.title
		trigger = {
			has_modifier = endgame_unity_roboticist_m_4
		}
		allow = {
			unity > @endgame_unity_cost_positive_266
		}
		remove_modifier = endgame_unity_roboticist_m_4
		add_modifier = {
			modifier = "endgame_unity_roboticist_m_5"
			days = -1
		}
		add_unity = @endgame_unity_cost_negative_266
	}
	
	
	
	#Refuse
	option = {
		name = endgame_unity.10.refuse.title
		trigger = {
			unity > @endgame_unity_cost_positive_266
		}
		add_modifier = {
			modifier = "endgame_unity_spend_refused"
			days = 1800
		}
	}
	
	
	
	#Not enough unity
	option = {
		name = endgame_unity.10.na.title
		trigger = {
			NOT = {
				unity > @endgame_unity_cost_positive_266
			}
		}
	}
	
	
	
	after = {
		hidden_effect = {
			remove_country_flag = endgame_unity_dialog_open
			if = {
				limit = {
					#In theory, the player could get all of the non-gated buffs up to level 5 while having the gate techs available but not researched.
					#However, this is extremely unlikely, so we won't worry about that situation!
					has_modifier = endgame_unity_influence_5
					has_modifier = endgame_unity_research_5
					has_modifier = endgame_unity_fleetcap_5
					OR = {
						has_modifier = endgame_unity_megastructure_5
						NOT = {
							OR = {
								has_technology = tech_mega_engineering
								has_ascension_perk = ap_the_circle_of_life
								has_ascension_perk = ap_galactic_wonders
								has_ascension_perk = ap_voidborn
							}
						}
					}
					has_modifier = endgame_unity_weapons_5
					has_modifier = endgame_unity_leader_5
					OR = {
						has_modifier = endgame_unity_geneticist_5
						NOT = { has_technology = tech_gene_tailoring }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_5
						has_authority = auth_machine_intelligence
						NOT = { has_technology = tech_robomodding }
					}
					OR = {
						has_modifier = endgame_unity_roboticist_m_5
						NOT = { has_authority = auth_machine_intelligence }
						NOT = { has_technology = tech_robomodding_m }
					}
				}
				set_country_flag = endgame_unity_complete
			}
		}
	}
	
}
